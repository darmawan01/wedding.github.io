<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-rc.2/css/materialize.min.css">
  <script src="./js/axios.min.js"></script>
  <link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <title>Awan & Sri Wedding Invitation</title>
  <style>
    @font-face {
      font-family: 'EasyNovember';
      src: url('./fonts/EasyNovember.ttf') format('truetype');
    }

    img {
      display: block;
      margin-left: auto;
      margin-right: auto;
      width: 100%;
    }

    .card,
    .card-content {
      padding: 0 !important;
    }

    body {
      background: url('./img/background.jpg') no-repeat center center fixed;
      -webkit-background-size: cover;
      -moz-background-size: cover;
      -o-background-size: cover;
      background-size: cover;
    }
  </style>
</head>

<body>
  <div class='container' id="app">
    <div class="row" style="margin-top: 100px">
      <p style="font-family: 'Raleway'">Hi <span style="font-weight: bold" id="to-name">{{ invite.name }}</span>,
        <span style="float: right;" id="count-down"></span>
      </p>
      <div class="card col s12 l12">
        <div class="card-content" v-if="!invite">
          <p>Maaf, kode yang anda masukkan salah.</p>
        </div>
        <div class="card-content" v-if="invite">
          <img :src="content" height="600" alt="" srcset="" class="responsive-img">
        </div>
      </div>
      <div class="center-align">
        <button class="btn-flat" v-on:click="nextPage"><i class="material-icons">keyboard_arrow_left</i></button>
        <button class="btn-flat" v-on:click="prevPage"><i class="material-icons">keyboard_arrow_right</i></button>
      </div>
    </div>
  </div>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-rc.2/js/materialize.min.js"></script>
  <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/vue@2.5.17/dist/vue.js"></script>
  <script>
    var app = new Vue({
      el: '#app',
      data: {
        // https://www.uuidgenerator.net/
        invites: invites,
        page: 0,
        content: './img/1.jpg'
      },
      computed: {
        code: function () {
          var uri = window.location.search.substring(1);
          return uri.split('=')[1];
        },
        invite: function () {
          var code = this.code;
          return this.invites.find(function (i) {
            return i.id == code
          })
        },
      },
      mounted: function () {
        var countDownDate = new Date("Aug 01, 2021 08:00").getTime();

        var x = setInterval(function () {
          var now = new Date().getTime();

          var distance = countDownDate - now;

          var days = Math.floor(distance / (1000 * 60 * 60 * 24));
          var hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
          var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
          var seconds = Math.floor((distance % (1000 * 60)) / 1000);

          document.getElementById("count-down").innerHTML = days + "d " + hours + "h " +
            minutes + "m " + seconds + "s ";

          // If the count down is finished, write some text
          if (distance < 0) {
            clearInterval(x);
            document.getElementById("count-down").innerHTML = "Live,Now !";
          }
        }, 1000);
      },
      methods: {
        nextPage() {
          this.page++;
          this.content = './img/1.jpg';
        },
        prevPage() {
          this.page--;
          this.content = './img/2.jpg';
        }
      }
    })
  </script>
</body>

</html>